<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta charset="UTF-8" />
  <meta name="robots" content="index, follow" />
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Cache-Control" content="public, max-age=31536000">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <meta name="description" content="My daily news site." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Main</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Guest / User messages -->
  <div id="guest-message" style="display:none;">
    You are browsing as a guest. <a href="login.html" style="color: aqua;">Sign in</a> for more features!
  </div>

  <div id="user-message" style="display:none;">
    Welcome back, <span id="user-email"></span>!
    <button id="logoutButton" style="display:none;">Log Out</button>
  </div>

  <div class="main">
    <h1>Welcome!</h1>
    <h1>--------------------------------------------------------------------</h1>
  </div>
  
  
  <p>You can find our news here:</p>
  <a href="articles.html" class="styled-button">Our articles</a><br><br><br>
  <a class="styled-button" href="what-vegan-dinner-tonight.html">Make a vegan dinner</a>
  <p>Or:</p>
  <a class="styled-button" href="Chess.html">Learn how to play chess here!!!</a>

  <h1>--------------------------------------------------------------------</h1>
  <h1>Want to share feedback, ideas or a story? Share it here!</h1>
  <form action="https://formspree.io/f/mdklgkpy" method="POST">
  <label for="email">
    Your Email (Optional):
    <input type="email" id="email" name="email" placeholder="Your email (optional)">
  </label><br><br>

  <label for="message">
    Your Feedback:<br>
    <textarea id="message" name="message" rows="4" cols="50" placeholder="Enter your feedback here..." required></textarea>
  </label><br><br>

  <button type="submit">Send Feedback</button>
</form>


  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD4hz1uLF7qcD5EeIgSGQMO9MEuqVnqYFU",
      authDomain: "my-cool-site-c36c7.firebaseapp.com",
      projectId: "my-cool-site-c36c7",
      storageBucket: "my-cool-site-c36c7.appspot.com",
      messagingSenderId: "233337803146",
      appId: "1:233337803146:web:630cf1d5e1bd3553e0f873",
      measurementId: "G-TB9DMDD8N7"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        showUserFeatures(user);
      } else {
        showGuestFeatures();
      }
    });

    function showGuestFeatures() {
      document.getElementById('guest-message').style.display = 'block';
      document.getElementById('user-message').style.display = 'none';
      document.getElementById('logoutButton').style.display = 'none'; // Hide log-out button

      // Hide all <p> tags for guests
      const guestOnlyElements = document.querySelectorAll('.guest-only');
      guestOnlyElements.forEach(el => el.style.display = 'none');
    }

    function showUserFeatures(user) {
      document.getElementById('guest-message').style.display = 'none';
      document.getElementById('user-message').style.display = 'block';
      document.getElementById('user-email').textContent = user.email;
      document.getElementById('logoutButton').style.display = 'inline'; // Show log-out button

      // Show all <p> tags for logged-in users
      const guestOnlyElements = document.querySelectorAll('.guest-only');
      guestOnlyElements.forEach(el => el.style.display = 'block');
    }

    // Log-out functionality
    document.getElementById('logoutButton').addEventListener('click', function() {
      firebase.auth().signOut()
        .then(() => {
          alert('Logged out successfully!');
          window.location.href = 'login.html'; // Redirect to login page
        })
        .catch((error) => {
          alert('Error logging out: ' + error.message);
        });
    });
    document.cookie = "visit_site=Yes/True";
  </script>

  <p>Our sources: <a href="https://Reuters.com">Reuters</a>, <a href="https://newsapi.org">newsAPI</a> and more...</p>
</body>
</html>
